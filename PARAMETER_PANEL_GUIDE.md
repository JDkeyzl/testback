# 参数面板使用指南

## 功能概述

参数面板是一个独立的配置界面，允许用户通过直观的滑块和输入框来配置策略节点的参数。所有参数都存储在全局状态中，确保数据的一致性和实时更新。

## 技术实现

### 状态管理
- **Zustand**: 轻量级状态管理库
- **全局状态**: 所有节点参数统一管理
- **实时同步**: 参数修改立即反映到节点显示

### UI组件
- **shadcn/ui Slider**: 用于数值范围选择
- **shadcn/ui Input**: 用于精确数值输入
- **shadcn/ui Card**: 用于面板布局

## 节点类型和参数

### 1. 条件节点 (Condition Node)

#### 移动均线 (MA)
- **周期** (period): 1-200，默认20
  - 滑块控制范围选择
  - 输入框精确设置
- **阈值** (threshold): 0-200，默认50.0
  - 滑块控制范围选择
  - 输入框精确设置
- **操作符** (operator): 下拉选择
  - 大于、小于、大于等于、小于等于、等于、不等于

#### RSI指标
- **周期** (period): 1-100，默认14
  - 滑块控制范围选择
  - 输入框精确设置
- **RSI阈值** (threshold): 0-100，默认30.0
  - 滑块控制范围选择
  - 输入框精确设置
- **操作符** (operator): 下拉选择

#### MACD指标
- **快线周期** (fast): 1-50，默认12
- **慢线周期** (slow): 1-100，默认26
- **信号线周期** (signal): 1-20，默认9
- **阈值** (threshold): -1到1，默认0.0
- **操作符** (operator): 下拉选择

#### 成交量/价格
- **阈值** (threshold): 根据类型设置范围
  - 成交量: 0-10,000,000，步长1000
  - 价格: 0-1000，步长0.1
- **操作符** (operator): 下拉选择

### 2. 逻辑节点 (Logic Node)

#### 逻辑类型
- **AND**: 逻辑与，需要两个输入
- **OR**: 逻辑或，需要两个输入
- **NOT**: 逻辑非，需要一个输入

### 3. 动作节点 (Action Node)

#### 买入/卖出信号
- **动作类型**: 买入、卖出、持有
- **数量** (quantity): 1-10,000，默认100
  - 滑块控制范围选择
  - 输入框精确设置
- **价格类型** (priceType): 市价、限价

#### 持有信号
- 无需配置参数

## 使用方法

### 1. 选择节点
- 点击画布中的任意节点
- 节点会显示蓝色边框表示选中状态
- 参数面板会显示对应节点的配置选项

### 2. 配置参数
- **滑块**: 拖拽滑块快速调整数值范围
- **输入框**: 直接输入精确数值
- **下拉选择**: 选择预定义选项

### 3. 实时更新
- 参数修改后立即保存到全局状态
- 节点显示文本实时更新
- 无需手动保存

### 4. 参数持久化
- 所有参数自动保存到Zustand store
- 节点删除时自动清理相关参数
- 支持策略保存和加载

## 界面布局

```
┌─────────────────────────────────────────────────────────┐
│ 策略构建器                                              │
├─────────────────────────┬───────────────────────────────┤
│ 节点工具栏              │ 参数配置面板                  │
│ ┌─────────────────────┐ │ ┌─────────────────────────────┐ │
│ │ 条件节点            │ │ │ 移动均线                    │ │
│ │ 逻辑节点            │ │ │ 节点ID: condition1          │ │
│ │ 动作节点            │ │ │                            │ │
│ └─────────────────────┘ │ │ 周期: [滑块] [输入框]       │ │
│                         │ │ 阈值: [滑块] [输入框]       │ │
│ React Flow 画布         │ │ 操作符: [下拉选择]          │ │
│ ┌─────────────────────┐ │ │                            │ │
│ │ [节点1] [节点2]     │ │ │ 实时显示当前配置            │ │
│ │ [节点3] [节点4]     │ │ │                            │ │
│ └─────────────────────┘ │ └─────────────────────────────┘ │
│                         │                                │
│ 策略参数                │                                │
│ 开始时间 | 结束时间 | 资金 │                                │
└─────────────────────────┴───────────────────────────────┘
```

## 技术特性

### 响应式设计
- 参数面板固定宽度320px
- 适配不同屏幕尺寸
- 移动端友好

### 性能优化
- 使用React.memo避免不必要的重渲染
- Zustand状态管理高效更新
- 滑块和输入框防抖处理

### 用户体验
- 直观的滑块控制
- 精确的数值输入
- 实时参数预览
- 清晰的视觉反馈

## 扩展功能

### 可添加的参数类型
- 颜色选择器
- 日期时间选择器
- 多选下拉框
- 开关切换器

### 可添加的验证
- 参数范围验证
- 依赖关系检查
- 实时错误提示

### 可添加的功能
- 参数预设模板
- 批量参数设置
- 参数导入导出
- 参数历史记录
