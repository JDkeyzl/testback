# 策略构建器使用指南

## 功能概述

策略构建器是一个基于React Flow的可视化交易策略构建工具，允许用户通过拖拽节点和连线来创建复杂的交易逻辑。

## 节点类型

### 1. 条件节点 (Condition Node)
用于设置技术指标条件，支持以下类型：

#### 移动均线 (MA)
- **参数**: 周期、比较值、操作符
- **示例**: MA(20) > 50
- **用途**: 判断价格是否在移动均线之上

#### RSI指标
- **参数**: 周期、RSI值、操作符
- **示例**: RSI(14) < 30
- **用途**: 判断超买超卖状态

#### MACD指标
- **参数**: 快线、慢线、信号线、比较值、操作符
- **示例**: MACD(12,26,9) > 0
- **用途**: 判断趋势变化

#### 成交量
- **参数**: 比较值、操作符
- **示例**: 成交量 > 1000000
- **用途**: 判断成交量条件

#### 价格
- **参数**: 比较值、操作符
- **示例**: 价格 > 100
- **用途**: 判断价格条件

### 2. 逻辑节点 (Logic Node)
用于组合多个条件：

#### AND (逻辑与)
- **输入**: 2个条件
- **逻辑**: 所有条件都为真时输出真
- **示例**: 条件1 AND 条件2

#### OR (逻辑或)
- **输入**: 2个条件
- **逻辑**: 任一条件为真时输出真
- **示例**: 条件1 OR 条件2

#### NOT (逻辑非)
- **输入**: 1个条件
- **逻辑**: 条件为假时输出真
- **示例**: NOT 条件1

### 3. 动作节点 (Action Node)
用于执行交易动作：

#### 买入信号
- **参数**: 数量、价格类型
- **用途**: 生成买入信号

#### 卖出信号
- **参数**: 数量、价格类型
- **用途**: 生成卖出信号

#### 持有信号
- **参数**: 无
- **用途**: 保持当前仓位

## 使用方法

### 1. 添加节点
- **拖拽方式**: 从节点工具栏拖拽节点到画布
- **点击方式**: 点击节点工具栏中的"添加"按钮

### 2. 配置节点
- 点击节点上的设置图标进入编辑模式
- 修改参数后点击"保存"按钮
- 点击删除图标可以删除节点

### 3. 连接节点
- 从源节点的底部连接点拖拽到目标节点的顶部连接点
- 逻辑节点的AND/OR类型有两个输入连接点
- NOT类型只有一个输入连接点

### 4. 保存和加载
- 点击"保存"按钮保存当前策略
- 点击"加载"按钮加载已保存的策略
- 点击"清空"按钮清除所有节点

## 示例策略

### 简单买入策略
```
MA(20) > 50 AND RSI(14) < 30 → 买入
```

### 复杂策略
```
(MA(20) > 50 OR MACD(12,26,9) > 0) AND 成交量 > 1000000 → 买入
```

## 技术实现

- **框架**: React Flow
- **节点组件**: 自定义React组件
- **状态管理**: React Hooks
- **样式**: TailwindCSS + shadcn/ui
- **交互**: 拖拽、点击、连线

## 扩展功能

### 可添加的节点类型
- 更多技术指标 (KDJ, BOLL, CCI等)
- 时间条件节点
- 风险控制节点
- 仓位管理节点

### 可添加的功能
- 策略验证
- 代码生成
- 策略分享
- 版本控制
